{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load carrier_tags %}

{% block title %} {% trans "Job Postings" %} {% endblock title %}
{% block content %}

<h3 class="mb-3"> {{ request.GET.department }} Job Postings</h3>
    <div class="container-fluid border-border-dark" >
    {% if tps %}
        {% for i in tps|slice:"0:1"%}
           <h5 class="mt-4"> Carrier Assignment period for University Department : {{i.carrier_assignment.department}} <br> <br> <hr> Starting date: {{i.carrier_assignment.from_date}} <br> <br> <hr> Ending date:  {{i.carrier_assignment.to_date}} </h5>
        {% endfor %}
        <br>
        <br>
        {% if assignment_period  %}
           <a href="{% url 'carrier:traineeposition_create'%}?department={{ request.GET.department }}" class="btn btn-success mb-2 ">Add Job position</a>
        {% endif %}
        </br>
        </br>
        {% for tp in tps %}
            <div class="card mb-5">
                <div class="card-header bg-white text-dark">
                    <h4>{{tp.title}}</h4>
                </div>
                <div class="card-body">
                   <div class="card mb-5">
                    <div class="card-header bg-white text-dark">
                        <p>Description:</p>
                    </div>
                    <div class="card-body">
                      <p class="pt-2">{{tp.description}} </p>
                    </div>
                    <div class="card-body border">
                      <h6 class="pt-2"> Œùubmer ID:{{tp.no_id}} </h6>
                    </div>
                    <div class="card-footer bg-white">
                      <p> Carrier Assingment Period </p>
                      <p>Start date: {{tp.carrier_assignment.from_date}}</p>
                      <p>End Date: {{tp.carrier_assignment.to_date}}</p>
                    </div>
                </div>
                </div>
                <div class="card-footer">
                    {% if assignment_period %}
                      <a href="/carrier/traineepositions/{{tp.pk}}/update?department={{ request.GET.department }}" class="btn btn-info mb-2 btn-block">Edit </a>
                      <a href="/carrier/traineepositions/{{tp.pk}}/delete?department={{ request.GET.department }}" class="btn btn-danger btn-block" >Delete </a>
                    {% endif %}
               </div>
            </div>
        {% endfor %}
    {% else %}
       {% if assignment_period %}
            <h5>No Job postings found</h5>
            <h5>Do you want to create a new job posting?</h5>
            <br>
        <a href="{% url 'carrier:traineeposition_create'%}?department={{ request.GET.department }}" class="btn btn-success mb-2 ">Create Job position</a>
        {% else %}  
            <h4>Carrier assignment period not found</h4>
            <br>
        {% endif %}
        <a href="/" class="btn btn-info mb-2 ">Go back</a>
    {% endif %}
    </div>
{% endblock content %}
